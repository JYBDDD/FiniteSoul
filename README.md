# FiniteSoul
장르
시스템 개요 및 상세설명

1. 장르 : 로그라이트 (엘든링)

	- 시작 시 캐릭터 직업 설정 할 수 있도록 할 것
	- 무작위 배치
	- 특정 저장 오브젝트를 이용하지 않을 시 위치값 초기화
	- 게임 오버 될 시에도 유지되는 능력치 존재
	- 저장을 하더라도 사망시 저장이 유지되지 않는 값 존재
	- 씬 이동 (비동기)

2. 디자인 패턴

	- 싱글톤
	- 실행 시 필수적으로 존재하여야 하는 Manager 클래스는 T타입 싱글톤으로 주어 데이터를 이용가능하도록 
		(DontDestroyOnLoad) 로 파괴 불가능하도록 할 것

3. 데이터 설정 및 변경 :
	
	- ExcelToJsonConverter2 를 사용하여 데이터를 설정,변경할 것임
	- 플레이어 데이터 저장, 불러오기는 Json데이터를 생성하여 값을 적용할것(없다면 저장하지 않았거나, 첫시작일시)
	- GameManager에서 가지고 있을 데이터 (플레이어 데이터, 몬스터 데이터)
	- MovableObject(이동 가능 객체) 자식으로 플레이어,몬스터,보스몬스터 값 설정할 것
	- 몇몇 객체들은 파괴 가능하도록 인터페이스를 작성하여 파괴가능한지 체크 할것

4. 구현할 UI 및 데이터 : 
	
	4.1 이동가능한 데이터
	- 플레이어 데이터
	- 몬스터 데이터
	- 보스 몬스터 데이터

	4.2 이동 불가능한 데이터
	- 인터페이스 (파괴 가능한지, 불가능한지)

	4.3 UI
	- 인벤토리
	- 상점
	- 스탯창
	- 소비아이템 사용시(사용 쿨타임)
	- 체력, 스테미너
	- 비동기 씬 로드 (시간이 오래 걸리지 않을 것이기 때문에 3초정도 딜레이를 줄것임)

-----------------------------------------------------------------------------------------------------------------------
진행 사항

0. 작업 시작 (대략적인 기획)
22.03.14

1. 플레이어 모델 애니메이션 수정(Paladin, Archer)
	-> (Paladin)검, 방패 / (Archer) 활, 화살 프리팹 삽입함 -> 그에 맞게 애니메이션 조정
22.03.15
	
2. 데이터 설정 (Excel, Json)
	-> 플러그인 ExcelToJsonConvert2Debug 로 엑셀 파일을 Json 파일로 변환
	-> GameManager 에 데이터 삽입 및 변환시키는 InsertDataSetting 메소드 작성, Awake() 시 실행되도록 
	-> MoveableObject 및 PlayerController등 스텟 삽입에 필요한 데이터 추가 작성
	-> 데이터를 로드하는 방법은 모든데이터가 저장되어 있는 FullData 에서 Linq 의 Where 로 값을 하나씩 찾아 resourcePath로 생성 후,
		 생성된 오브젝트에 데이터를 넣어주는 방식
	
	 /참고사항/
   	 // jsonUtility는 배열일 시 못가져옴,
   	 // Litjson은 값을 따로따로 찾는 것이기때문에 값을 넣을 수는 있지만, 한꺼번에 넣기가 번거로움
   	 // 그리하여 NewtonSoft.json 을 사용했음 (변환부 : GameManager)
22.03.17

3. 메인 카메라 설정
	-> 작성중...... TODO



---------------------------------------------------------------------------------------------------------------------
수정해야할 사항

0. 메인 카메라
	-> 메인 카메라 하나를 프리팹화 해야함
	-> 마우스 위치에 따라 카메라가 회전하도록
	-> 플레이어가 회전하도록
	-> 뒤에 벽이 존재할 시, 벽앞에서 카메라가 비추도록

참고 - https://itadventure.tistory.com/398?category=862463

--------------------------------------------------------------

1. 애니메이션 블랜딩

★ 데이터 설정 후, 아바타 마스크를 이용하여 애니메이션을 블랜딩 시킬것임
참조 - https://www.youtube.com/watch?v=BStXjU-mJvk


스테이트 머신은 일단 PlayerController 에 만 있음 나중에 MonsterController에도 넣어줘야함
	-> 모든 플레이어 공통 애니메이션은 PlayerController에 작성하고, 다른 부분만 하위 자식에게 작성하는 방식으로 할것

팔라딘 블랜드 트리(이렇게 만들 것임)
	1. Walk Tree
		1.1 TurnLeft : 진행하던 방향에서 마우스(플레이어가 바라보는 방향)가 왼쪽으로 회전시 실행
		1.2 TurnRight : 진행하던 방향에서 마우스(플레이어가 바라보는 방향)가 오른쪽으로 회전시 실행
		1.3 Walk : W 버튼 클릭시 마우스 방향으로 직진
		1.4 BackWalk : S 버튼 클릭시 마우스 반대 방향으로 후진
		1.5 Idle : 마우스회전, 버튼을 입력하지 않고있다면 대기상태

----------------------------------------------------------------------------------------------------------------------------
2. 몬스터
	2.1 Animator override Controller 사용할것
	- 참고 : https://bbangdeveloper.tistory.com/entry/Animation-Animator-Override-Controller

-----------------------------------------------------------------------------------------------------------
3. 데이터

작성한 데이터를 리스트 형태로 넣어 빼서 쓸 수 있도록 할것
json 읽는 코드 작성하여 게임 시작 시, 값에 넣도록 설정할 것임(GameManager에 데이터 삽입부 작성할 것임) 

    
    -> TODO 몬스터 데이터는 아직 미설정 (플레이어 애니메이션 블랜딩 완료 후, )
    -> 데이터를 로드하는 방법은 모든데이터가 저장되어 있는 FullData 에서 Linq 의 Where 로 값을 하나씩 찾아 resourcePath로 생성 후,
		 생성된 오브젝트에 데이터를 넣어주는 방식	-> 4.2 하고나서 해야함 ★☆★
	
-----------------------------------------------------------------------------------------------------------------
4. 풀링++그 외 TODO

	4.1 재사용가능하도록 설정해주는 인터페이스를 상속받는 오브젝트들은 풀링이 가능하도록 설정할것
	4.2 몬스터 생성은 싱글톤을 상속받는 StageManager를 만들어 해당 스테이지로 이동시 설정해둔(스폰위치 <리스트로 받아 넣어주면 될듯>) 위치로 생성하기
	4.3 스테이지 엑셀데이터 만들어서 (스테이지 인덱스,스폰위치,스폰 몬스터 인덱스) FullData에 넣어놓아야 할듯
	4.4 워프 시키는 스크립트 하나 만들어야 할듯
	4.5 게임 메인 화면 만들기
	4.6 로딩 씬 
	4.7 비동기 씬 로드 만들기
	

